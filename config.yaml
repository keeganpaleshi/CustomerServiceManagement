openai:
  api_key_env: OPENAI_API_KEY        # name of env var or you can inline a key (not recommended)
  classify_model: "gpt-4o"
  draft_model:    "gpt-4o"
  # Maximum tokens allowed in the draft generation call
  draft_max_tokens: 16384
  # System prompt used when drafting replies. Modify to change tone or style.
  draft_system_message: |
    Context: This is a business email for Cruising Solutions. You are replying
    to customers who have concerns or questions some about orders they've
    placed, others about products they're considering purchasing. You should
    reply in the name of David, lead Customer Service Member, with the phone
    number 843-222-3660.

    Style Guidelines:

        Write in an email format.
        Be kind, courteous, and polite.
        Recognize any urgency in the customer's message.
        Provide helpful, succinct responses (most customers appreciate concise
        emails).
        Avoid giving specific dates or times when you will follow up (e.g., no
        "today," "tomorrow," or exact deadlines). Instead, use phrases such as:
            "as soon as possible"
            "at your earliest convenience"
        Occasionally use nautical terms, as most customers are sailors.
        If you don't have an answer to their question immediately, let them
        know you're checking into it and will respond once you have the
        information.
  # Maximum tokens for the classification model
  classify_max_tokens: 150
  # Timeout (seconds) for OpenAI API requests
  timeout: 30
  # Rate limiter for OpenAI calls (set max_requests or window_seconds to 0 to disable)
  rate_limit:
    max_requests: 60
    window_seconds: 60
  # Budget limits for OpenAI API costs (set to 0 to disable)
  budget:
    daily_usd: 10.0      # Maximum USD to spend per day (0 = unlimited)
    monthly_usd: 200.0   # Maximum USD to spend per month (0 = unlimited)
  # Fallback email signature when OpenAI API fails or is rate limited
  fallback_signature: |
    Best,
    David
    Cruising Solutions Customer Support

thresholds:
  critic_threshold: 8.0
  max_retries:      2

limits:
  # Maximum number of drafts created in a single run
  max_drafts: 100
  # Maximum number of messages to process in a single run
  max_messages_per_run: 100

ticket:
  system:         "freescout"        # or "helpscout", "freshdesk", etc.
  # REQUIRED: FreeScout URL - set via FREESCOUT_URL env var or here
  freescout_url:  ""                 # e.g., "https://your-freescout-instance.com"
  # REQUIRED: FreeScout API key - set via FREESCOUT_KEY env var or here
  freescout_key:  ""                 # API key from FreeScout settings
  # REQUIRED: Numeric FreeScout mailbox ID used when creating conversations
  mailbox_id:     null                # e.g., 1
  # Rate limiter for FreeScout API calls (set to 0 to disable)
  rate_limit:
    max_requests: 100               # Maximum requests per window
    window_seconds: 60              # Time window in seconds
  gmail_thread_field_id: null         # custom field ID to store the Gmail threadId (optional)
  gmail_message_field_id: null        # custom field ID to store the Gmail messageId (optional)
  sqlite_path: "./csm.sqlite"        # durable store for processed messages and thread mapping
  webhook_enabled: false            # set true to use webhook ingestion (polling is disabled when enabled)
  webhook_secret: ""                 # shared secret for validating webhook requests
  poll_interval: 300                 # seconds between FreeScout polls when --poll-freescout is enabled
  actions:
    update_priority: true           # automatically set priority based on AI classification
    priority_high_threshold: 8      # importance score (1-10) that counts as high priority
    assign_to_user_id: null         # FreeScout user ID to assign tickets to (null = no assignment)
    apply_tags: true                # tag conversations with the detected type/importance
    custom_fields:
      type_field_id: null           # FreeScout custom field ID used to store "lead"/"customer"/"other"
      importance_field_id: null     # FreeScout custom field ID used to store the numeric importance
    post_internal_notes: true       # add an internal note summarizing the classification
    post_suggested_reply: true      # add an internal note containing a suggested AI reply
  followup:
    hours_without_reply: 24         # minimum hours since last customer message
    required_tags: []               # tags that must be present to qualify
    excluded_tags: ["followup-ready"] # tags that disqualify a conversation
    required_states: []             # optional FreeScout states/statuses to include
    followup_tag: "followup-ready"  # tag applied after drafting a follow-up
    limit: 100                      # maximum conversations to inspect per run
    dry_run: false                  # if true, log only
    list_params: {}                 # optional raw query params for /api/conversations
    p0_tags: ["p0"]                 # tags that mark a conversation as P0
    notify:
      slack_webhook_url: ""         # set to enable Slack notifications for P0 follow-ups
      email:
        smtp_host: ""               # set to enable email notifications for P0 follow-ups
        smtp_port: 587
        smtp_username: ""
        smtp_password: ""
        from: ""
        to: ""
        use_tls: true
        use_ssl: false
        timeout: 30             # SMTP connection timeout in seconds

gmail:
  scopes:
    - "https://www.googleapis.com/auth/gmail.modify"
  client_secret_file: "client_secret.json"
  token_file:         "token.json"
  # Set to true to force console-based OAuth (paste auth code) instead of opening a browser
  use_console_oauth:  false
  # Default Gmail search query
  query: "is:unread"

http:
  # Timeout (seconds) for external HTTP requests
  timeout: 15

# Webhook server configuration
webhook:
  # Directory for webhook payload logs (relative or absolute path)
  # Default: ./logs/webhooks
  log_dir: ""
  # Maximum age of webhook logs in days (older files are deleted)
  max_age_days: 30
  # Maximum number of webhook log files to keep
  max_files: 10000
